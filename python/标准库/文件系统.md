# Python文件系统操作

Python提供了多个模块用于文件系统操作，包括`os`、`os.path`、`pathlib`和`shutil`。这些模块提供了创建、移动、复制和删除文件和目录等功能，以及获取文件信息和操作路径的工具。

## os模块

`os`模块提供了与操作系统交互的各种函数，包括文件系统操作、进程管理和环境变量访问等。

### 目录操作

```python
import os

# 获取当前工作目录
current_dir = os.getcwd()
print(f"当前工作目录: {current_dir}")

# 改变当前工作目录
os.chdir('/tmp')
print(f"现在的工作目录: {os.getcwd()}")

# 列出目录内容
files = os.listdir('.')  # 列出当前目录下的所有文件和子目录
print(f"目录内容: {files}")

# 创建单级目录
if not os.path.exists('new_folder'):
    os.mkdir('new_folder')
    print("已创建new_folder目录")

# 创建多级目录
if not os.path.exists('path/to/nested/folder'):
    os.makedirs('path/to/nested/folder')
    print("已创建嵌套目录")

# 删除目录
if os.path.exists('new_folder'):
    os.rmdir('new_folder')  # 只能删除空目录
    print("已删除new_folder目录")

# 获取目录内容的详细信息
for entry in os.scandir('.'):
    print(f"名称: {entry.name}, 是文件: {entry.is_file()}, 是目录: {entry.is_dir()}")
```

### 文件操作

```python
import os

# 检查文件是否存在
file_exists = os.path.exists('example.txt')
print(f"文件存在: {file_exists}")

# 获取文件大小（字节）
if file_exists:
    size = os.path.getsize('example.txt')
    print(f"文件大小: {size} 字节")

# 检查是文件还是目录
is_file = os.path.isfile('example.txt')
is_dir = os.path.isdir('example.txt')
print(f"是文件: {is_file}, 是目录: {is_dir}")

# 重命名文件或目录
if file_exists:
    os.rename('example.txt', 'example_renamed.txt')
    print("文件已重命名")

# 删除文件
if os.path.exists('example_renamed.txt'):
    os.remove('example_renamed.txt')
    print("文件已删除")

# 创建空文件或更新文件时间戳
with open('new_file.txt', 'w') as f:
    f.write("Hello, world!")
os.utime('new_file.txt')  # 更新访问和修改时间到当前时间
```

### 文件属性

```python
import os
import time

# 获取文件的基本信息
stat_info = os.stat('new_file.txt')
print(f"文件大小: {stat_info.st_size} 字节")
print(f"最后访问时间: {time.ctime(stat_info.st_atime)}")
print(f"最后修改时间: {time.ctime(stat_info.st_mtime)}")
print(f"创建时间: {time.ctime(stat_info.st_ctime)}")  # 在Windows上是创建时间，在Unix上是元数据更改时间
print(f"文件模式: {stat_info.st_mode:o}")  # 八进制表示
```

### 文件权限

```python
import os

# 更改文件权限（仅在Unix/Linux/Mac上有效）
try:
    # 设置权限为 owner:rw-, group:r--, others:r--  (644)
    os.chmod('new_file.txt', 0o644)
    print("文件权限已更改")
except Exception as e:
    print(f"更改权限失败: {e}")

# 获取文件所有者和组（仅在Unix/Linux/Mac上有效）
try:
    uid = os.stat('new_file.txt').st_uid
    gid = os.stat('new_file.txt').st_gid
    print(f"所有者ID: {uid}, 组ID: {gid}")
except Exception as e:
    print(f"获取所有者信息失败: {e}")
```

## os.path模块

`os.path`模块提供了处理文件路径的函数，它是跨平台的，可以处理不同操作系统的路径格式。

### 路径操作

```python
import os.path

# 路径拼接（处理不同操作系统的路径分隔符）
path = os.path.join('folder', 'subfolder', 'file.txt')
print(f"拼接路径: {path}")

# 获取绝对路径
abs_path = os.path.abspath('new_file.txt')
print(f"绝对路径: {abs_path}")

# 获取标准化路径（解析 .. 和 . 等）
norm_path = os.path.normpath('/home/user/../user/./documents')
print(f"标准化路径: {norm_path}")  # /home/user/documents

# 拆分路径为目录和文件名
dir_name, file_name = os.path.split('/path/to/file.txt')
print(f"目录: {dir_name}, 文件名: {file_name}")

# 拆分文件名和扩展名
file_base, file_ext = os.path.splitext('file.txt')
print(f"文件名: {file_base}, 扩展名: {file_ext}")

# 获取目录路径
dir_path = os.path.dirname('/path/to/file.txt')
print(f"目录路径: {dir_path}")

# 获取文件名
file_name = os.path.basename('/path/to/file.txt')
print(f"文件名: {file_name}")

# 检查是否为绝对路径
