# Python运算符和表达式

Python提供了丰富的运算符，用于执行各种操作。理解这些运算符的行为和优先级对于编写高效、无误的Python代码至关重要。

## 算术运算符

Python支持所有基本的算术运算符：

```python
# 加法
result = 5 + 3  # 8

# 减法
result = 5 - 3  # 2

# 乘法
result = 5 * 3  # 15

# 除法（总是返回浮点数）
result = 5 / 3  # 1.6666666666666667

# 整数除法
result = 5 // 3  # 1

# 取余
result = 5 % 3  # 2

# 幂运算
result = 5 ** 3  # 125
```

## 比较运算符

比较运算符用于比较值，返回布尔结果：

```python
# 等于
5 == 5  # True

# 不等于
5 != 3  # True

# 大于
5 > 3  # True

# 小于
5 < 8  # True

# 大于等于
5 >= 5  # True

# 小于等于
5 <= 5  # True
```

## 逻辑运算符

逻辑运算符用于组合条件表达式：

```python
# 与操作
True and False  # False

# 或操作
True or False  # True

# 非操作
not True  # False
```

Python的逻辑运算符使用短路求值：

```python
# 短路与：如果第一个操作数为False，则不计算第二个操作数
False and print("不会执行")  # 直接返回False

# 短路或：如果第一个操作数为True，则不计算第二个操作数
True or print("不会执行")  # 直接返回True
```

## 位运算符

位运算符对整数的二进制表示进行操作：

```python
# 按位与
5 & 3  # 1 (0101 & 0011 = 0001)

# 按位或
5 | 3  # 7 (0101 | 0011 = 0111)

# 按位异或
5 ^ 3  # 6 (0101 ^ 0011 = 0110)

# 按位取反
~5  # -6 (~0101 = 1010, 在二进制补码表示中是-6)

# 左移
5 << 1  # 10 (0101 << 1 = 1010)

# 右移
5 >> 1  # 2 (0101 >> 1 = 0010)
```

## 赋值运算符

Python提供了多种赋值运算符，用于简化赋值操作：

```python
# 基本赋值
x = 5

# 加法赋值
x += 3  # 等价于 x = x + 3

# 减法赋值
x -= 2  # 等价于 x = x - 2

# 乘法赋值
x *= 4  # 等价于 x = x * 4

# 除法赋值
x /= 2  # 等价于 x = x / 2

# 整数除法赋值
x //= 2  # 等价于 x = x // 2

# 取余赋值
x %= 3  # 等价于 x = x % 3

# 幂运算赋值
x **= 2  # 等价于 x = x ** 2

# 位运算赋值
x &= 3  # 等价于 x = x & 3
x |= 3  # 等价于 x = x | 3
x ^= 3  # 等价于 x = x ^ 3
x <<= 2  # 等价于 x = x << 2
x >>= 1  # 等价于 x = x >> 1
```

## 成员运算符和身份运算符

Python提供了特殊的运算符用于检查成员关系和对象身份：

```python
# 成员运算符
5 in [1, 2, 3, 4, 5]  # True
6 not in [1, 2, 3, 4, 5]  # True

# 身份运算符
x = [1, 2, 3]
y = [1, 2, 3]
z = x

x is z  # True，x和z引用同一个对象
x is y  # False，x和y引用不同的对象
x is not y  # True，x和y引用不同的对象
```

## 运算符优先级

Python运算符有固定的优先级顺序，从高到低排列如下：

1. 圆括号：`()`
2. 幂运算：`**`
3. 正负号：`+x`, `-x`
4. 乘除模：`*`, `/`, `//`, `%`
5. 加减：`+`, `-`
6. 位移：`<<`, `>>`
7. 按位与：`&`
8. 按位异或：`^`
9. 按位或：`|`
10. 比较运算符：`==`, `!=`, `>`, `>=`, `<`, `<=`, `is`, `is not`, `in`, `not in`
11. 逻辑非：`not`
12. 逻辑与：`and`
13. 逻辑或：`or`

当有疑问时，可以使用括号明确指定运算顺序：

```python
result = (5 + 3) * 2  # 16，而不是 5 + (3 * 2) = 11
```

## 表达式和语句

在Python中，表达式是计算求值的代码，而语句是执行某个操作的代码。

表达式示例：
```python
5 + 3
x * y
func(arg1, arg2)
[x for x in range(10)]
```

语句示例：
```python
x = 5
if condition:
    print("True")
for i in range(10):
    pass
```

Python允许在某些语句中使用表达式，例如条件语句和循环语句：

```python
# 条件表达式（三元运算符）
result = "正数" if x > 0 else "零或负数"

# 列表推导式
squares = [x**2 for x in range(10)]
```

理解表达式求值和运算符优先级对于编写正确的Python代码至关重要。当表达式复杂时，使用括号可以提高代码的可读性，并确保操作按照预期的顺序执行。
